================================================================================
PROCHEFF-V2 Z-INDEX HIERARCHY DIAGRAM
================================================================================

Current State (with issues marked):

                                    z-[9999]
                                      ↑
                                      |
                    PROBLEMATIC!      |  ProductDetailModal Tooltip ⚠️ CRITICAL
                    (exceeds modal)   |
                                      |
                    ───────────────────┼────────────────────
                                      |
                                    z-51  ← RECOMMENDED for tooltips
                                      |
                    ───────────────────┼────────────────────
                                      |
                                    z-50  ← Modal & Overlays
                    ┌─────────────────┼─────────────────────┐
                    |                 |                     |
            ProductDetail        DeepAnalysis          Proposal
            Modal Overlay        Modal                Modal Content
                    |                 |                     |
                    └─────────────────┼─────────────────────┘
                                      |
            Sidebar Menu Button        |
            Mobile (z-50)              |
            Mobile Sidebar (z-50)      |
                    |                 |
                    └─────────────────┼─────────────────────┘
                                      |
                                    z-49  ← RECOMMENDED for backdrops
                    ┌─────────────────┼─────────────────────┐
                    |                 |                     |
            ProductDetail        Proposal              DeepAnalysis
            Modal Backdrop       Modal Backdrop        Modal Backdrop
            (currently z-50)     (currently z-50)      (z-50)
            (should be z-49)     (should be z-49)      ⚠️ DUPLICATE z-50
                    |                 |                     |
                    └─────────────────┼─────────────────────┘
                                      |
                                    z-40  ← Mobile Sidebar Backdrop ✓ Correct
                                      |
            Mobile Sidebar Overlay    |
            (backdrop)                |
                    |                 |
                    └─────────────────┼─────────────────────┘
                                      |
                                    z-10  ← Micro-interactions
                    ┌─────────────────┼─────────────────────┐
                    |                 |                     |
            Close Buttons        Badge Elements        Button Overlays
            Focus States         Focus Rings           Hover Effects
                    |                 |                     |
                    └─────────────────┼─────────────────────┘
                                      |
                                    z-auto ← Default flow

================================================================================
FIXED POSITIONING ELEMENTS STACKING:
================================================================================

DESKTOP (Desktop Only Visible):
┌─────────────────────────────────────────────────────────┐
│  Sidebar (sticky top-0, fills height)                   │ ← h-screen
│  - Not fixed, sticky                                    │
│  - Scrolls with content below                           │
│  - Always visible on desktop                            │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│  Topbar (in flex layout, h-14)                          │
│  - Not fixed, part of flex container                    │
│  - Scrolls with sidebar                                 │
│  - 56px height                                          │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│  Main Content (overflow-auto, flex-1)                   │
│  - Scrolls independently                                │
│  - Takes remaining space                                │
│  - Modals overlay on top                                │
└─────────────────────────────────────────────────────────┘

MOBILE (z-index stacking):
┌─────────────────────────────────────────────────────────┐
│  z-50 Menu Button (fixed top-4 left-4)  ⚠️ UNSAFE AREA │
│  top-4 left-4 overlaps with notches                     │
│  Should use: safe-area-inset-top/left                   │
└─────────────────────────────────────────────────────────┘
          ↓ (appears on top when clicked)
┌─────────────────────────────────────────────────────────┐
│  z-50 Mobile Sidebar (fixed left-0 top-0)   ✓           │
│  Slides in from left, full height                       │
│  z-50 means it's above modals (problematic if modal     │
│  opens while sidebar is open)                           │
└─────────────────────────────────────────────────────────┘
          ↓ (behind sidebar)
┌─────────────────────────────────────────────────────────┐
│  z-40 Mobile Sidebar Backdrop (fixed inset-0)  ✓        │
│  Covers entire screen, darkens content                  │
│  z-40 is correct (below sidebar at z-50)               │
└─────────────────────────────────────────────────────────┘

================================================================================
MODAL LAYERING (when modal is open):
================================================================================

┌─────────────────────────────────────────────────────────┐
│  z-50+ Modal Content (fixed, centered)                  │ ← Topmost visible
│  - Dialog box                                           │
│  - Scrollable content                                   │
│  - Close button                                         │
│  - TOOLTIPS SHOULD BE HERE (z-51)                       │
└─────────────────────────────────────────────────────────┘
          ↓ (behind modal)
┌─────────────────────────────────────────────────────────┐
│  z-49 Backdrop (fixed inset-0)        ✓ RECOMMENDED    │
│  - Black/dark overlay                                   │
│  - Covers entire screen                                 │
│  - Currently using z-50 (should be z-49)  ⚠️ ISSUE     │
└─────────────────────────────────────────────────────────┘
          ↓ (behind backdrop)
┌─────────────────────────────────────────────────────────┐
│  Page Content                                           │ ← Bottom
│  - Visible but dimmed behind backdrop                   │
│  - Not interactive (backdrop prevents clicks)           │
└─────────────────────────────────────────────────────────┘

================================================================================
COMPONENT POSITIONING ISSUES:
================================================================================

1. DocumentUploadCards (Lines 132)
   ┌─────────────────────────────────────────────────────┐
   │ grid grid-cols-4 (PROBLEMATIC)                      │
   │ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐               │
   │ │Card 1│ │Card 2│ │Card 3│ │Card 4│ (no responsive)│
   │ └──────┘ └──────┘ └──────┘ └──────┘               │
   │                                                     │
   │ FIX: Add responsive breakpoints                     │
   │ grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3     │
   │      lg:grid-cols-4                                 │
   └─────────────────────────────────────────────────────┘

2. ProductDetailModal Tooltip (Line 187)
   ┌─────────────────────────────────────────────────────┐
   │ Modal (z-50)                                        │
   │ ┌─────────────────────────────────────────────┐    │
   │ │ Item: "Source Info" ⓘ                       │    │
   │ │ Tooltip (z-9999) ← PROBLEM: Too high!       │    │
   │ │ ┌──────────────────────────────┐            │    │
   │ │ │ Kaynak Bilgisi               │            │    │
   │ │ │ Market: ABC                  │ (excessive)│    │
   │ │ │ ...                          │ z-index    │    │
   │ │ └──────────────────────────────┘            │    │
   │ │                                              │    │
   │ └─────────────────────────────────────────────┘    │
   │ Backdrop (z-50)                                     │
   │                                                     │
   │ FIX: Change z-[9999] to z-[51]                     │
   │      Add boundary detection                        │
   └─────────────────────────────────────────────────────┘

3. Mobile Menu Button Safe Area (Line 165)
   ┌─────────────────────────────────────────────────────┐
   │ iPhone 14 Pro (Safe Area Insets)                    │
   │                                                     │
   │ ╔═══════════════════════════════════════════════╗  │
   │ ║  Notch                  (safe-area-inset-top) ║  │
   │ ║                                               ║  │
   │ ║  [M]  Hamburger Button (top-4 left-4)        ║  │
   │ ║  ↑    PROBLEM: Overlaps notch!               ║  │
   │ ║       16px from top is too small              ║  │
   │ ║                                               ║  │
   │ ║  FIX: Use safe-area-inset-top + max()         ║  │
   │ ║       max(1rem, env(safe-area-inset-top)      ║  │
   │ ║           + 0.5rem)                           ║  │
   │ ╚═══════════════════════════════════════════════╝  │
   └─────────────────────────────────────────────────────┘

================================================================================
RECOMMENDED Z-INDEX SCALE:
================================================================================

z-[9999]     ╳ Remove (unused, problematic)
            
z-51         ✓ Tooltips, Popovers (above modals)
            
z-50         ✓ Modals, Overlays, Mobile Sidebar
            
z-49         ✓ Modal Backdrops (below modal content)
            
z-40         ✓ Mobile Sidebar Backdrop (below sidebar)
            
z-10         ✓ Buttons, Badges, Focus States
            
z-auto       ✓ Default/Normal flow (no z-index)

================================================================================
SUMMARY:
================================================================================

✓ GOOD:
  - Overall flex layout is excellent
  - Modal implementations are solid
  - Desktop sidebar sticky positioning is correct
  - Overflow handling is proper
  - Framer Motion AnimatePresence prevents DOM pollution

⚠️  NEEDS FIXING:
  1. ProductDetailModal tooltip z-[9999] → z-[51] (CRITICAL)
  2. ProposalModal backdrop z-50 → z-49 (HIGH)
  3. Mobile button safe area positioning (HIGH)
  4. DocumentUploadCards grid responsive breakpoints (MEDIUM)
  5. ProductDetailModal tooltip boundary detection (MEDIUM)

✓ OPTIONAL ENHANCEMENTS:
  - Create Z_INDEX constants file
  - Add tooltip repositioning logic
  - Implement safe-area-inset for mobile

